<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Slurm &mdash; buddy-docs  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data Storage" href="data_storage.html" />
    <link rel="prev" title="Using the Terminal" href="terminal.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> buddy-docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quickstart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/connection.html">Connecting to Buddy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/etiquette.html">Cluster Etiquette</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ondemand.html">Open Ondemand</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminal.html">Using the Terminal</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Slurm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#terminology">Terminology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#partitions">Partitions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cores">Cores</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sbatch-parameters">Sbatch Parameters</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#common-sbatch-parameters">Common sbatch parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_storage.html">Data Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_transfer.html">Data Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="requests.html">Requesting Software</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../software/ansys.html">ANSYS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/comsol.html">COMSOL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/conda.html">Anaconda</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../software/conda.html#example-script">Example Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../software/gaussian.html">Gaussian</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../software/gaussian.html#example-script">Example Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../software/jupyter_python.html">Jupyter/Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/r_studio.html">R/RStudio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/stacks.html">Stacks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/adv_slurm.html">Advanced Slurm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/machine_learning.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/ompi.html">OMPI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other HPC Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other_hpc_resources/ourrstore.html">OURRstore</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq/example.html">Example</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">buddy-docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Slurm</li>


      <li class="wy-breadcrumbs-aside">
      </li>


  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="slurm">
<h1>Slurm<a class="headerlink" href="#slurm" title="Permalink to this headline"></a></h1>
<div class="section" id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline"></a></h2>
<div class="section" id="tasks">
<h3>Tasks<a class="headerlink" href="#tasks" title="Permalink to this headline"></a></h3>
<p>A task is a command which is run in parallel by slurm using srun. Tasks can be used to run more than one command at the same time instead of one after the other, increasing performance</p>
</div>
<div class="section" id="partitions">
<h3>Partitions<a class="headerlink" href="#partitions" title="Permalink to this headline"></a></h3>
<p>Partitions are an organizational structure in slurm which allows nodes to be grouped together and for certain options and restrictions to be placed on them. We have a few partitions on Buddy:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this information can be found using the <code class="docutils literal notranslate"><span class="pre">sinfo</span></code> command in the terminal</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Time limit</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>general</p></td>
<td><p>5 days</p></td>
<td><p>Used for most jobs</p></td>
</tr>
<tr class="row-odd"><td><p>general-long</p></td>
<td><p>30 days</p></td>
<td><p>Used for jobs that are expected to run for a long time</p></td>
</tr>
<tr class="row-even"><td><p>high-mem</p></td>
<td><p>5 days</p></td>
<td><p>Used for jobs which are expected to have high memory usage</p></td>
</tr>
<tr class="row-odd"><td><p>high-mem-long</p></td>
<td><p>30 days</p></td>
<td><p>Used for long jobs which are expected to have high memory usage</p></td>
</tr>
<tr class="row-even"><td><p>gpu</p></td>
<td><p>5 days</p></td>
<td><p>Used for gpu jobs</p></td>
</tr>
<tr class="row-odd"><td><p>gpu-long</p></td>
<td><p>30 days</p></td>
<td><p>Used for gpu jobs which are expected to run for a long time</p></td>
</tr>
<tr class="row-even"><td><p>testing</p></td>
<td><p>2 days</p></td>
<td><p>Reserved for our internal testing</p></td>
</tr>
</tbody>
</table>
<p>We recommend that you use the partition that is most appropriate to your application.</p>
</div>
<div class="section" id="cores">
<h3>Cores<a class="headerlink" href="#cores" title="Permalink to this headline"></a></h3>
<p>Each node has 20 cores so the product of –tasks-per-node and –cpus-per-task should not exceed 20</p>
</div>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline"></a></h2>
<p>sbatch          used allocate resource and run the given script using slurm
srun            used withing an sbatch file to run a command as a parallel task
smap            displays the jobs currently running on the cluster
sinfo           displays information about down and running nodes aswell as partition information</p>
</div>
<div class="section" id="sbatch-parameters">
<h2>Sbatch Parameters<a class="headerlink" href="#sbatch-parameters" title="Permalink to this headline"></a></h2>
<p>Sbatch parameters are used to control the way jobs are submitted and run on buddy</p>
<div class="section" id="common-sbatch-parameters">
<h3>Common sbatch parameters<a class="headerlink" href="#common-sbatch-parameters" title="Permalink to this headline"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 20%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Environment variables</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>-J,–job-name</p></td>
<td><p>SLURM_JOB_NAME</p></td>
<td><p>script name or “sbatch”</p></td>
<td><p>the name of your job</p></td>
</tr>
<tr class="row-odd"><td><p>-o,–output</p></td>
<td><p>N/A</p></td>
<td><p>“slurm-%j.out”</p></td>
<td><p>file to dump standard output of program</p></td>
</tr>
<tr class="row-even"><td><p>-e,–error</p></td>
<td><p>N/A</p></td>
<td><p>“slurm-%j.out”</p></td>
<td><p>file to dump standard error of program</p></td>
</tr>
<tr class="row-odd"><td><p>-n,–ntasks</p></td>
<td><p>N/A</p></td>
<td><p>1 unless –cpus-per task is set</p></td>
<td><p>the maximum number of tasks sbatch should allocate
resources for</p></td>
</tr>
<tr class="row-even"><td><p>-N,–nodes</p></td>
<td><p>SLURM_JOB_NUM_NODES</p></td>
<td><p>enough nodes to satisfy the -n
and -c options</p></td>
<td><p>the number of nodes to allocate. A minimum and
maximum can also be set like: –nodes=10-12</p></td>
</tr>
<tr class="row-odd"><td><p>-c,–cpus-per-task</p></td>
<td><p>SLURM_CPUS_PER_TASK</p></td>
<td><p>one processor per task</p></td>
<td><p>the number of cpus to allocate for each task</p></td>
</tr>
<tr class="row-even"><td><p>–ntasks-per-node</p></td>
<td><p>SLURM_TASKS_PER_NODE</p></td>
<td><p>?</p></td>
<td><p>the number of tasks to allocate for on each node</p></td>
</tr>
<tr class="row-odd"><td><p>-p,–partition</p></td>
<td><p>SBATCH_PARTITION</p></td>
<td><p>general</p></td>
<td><p>the partition to run the job in</p></td>
</tr>
<tr class="row-even"><td><p>-t,–time</p></td>
<td><p>SBATCH_TIMELIMIT</p></td>
<td><p>max time for partition</p></td>
<td><p>the maximum amount of time the job is allowed to run</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="terminal.html" class="btn btn-neutral float-left" title="Using the Terminal" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="data_storage.html" class="btn btn-neutral float-right" title="Data Storage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, tdunn3.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>